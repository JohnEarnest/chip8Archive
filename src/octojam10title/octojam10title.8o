#######################################
#
#  Octojam 10 Greeting
#
#  by john earnest
#
#  this banner program is for the 10th
#  annual 2023 octojam, the world's
#  only CHIP-8 game jam. find out more
#  at octojam.com
#
#######################################

: main
	# initialize the background image
	# with a fully-unrolled loop:
	# v0 := 0 # x axis
	v1 := 1   # y axis (odd parity)
	v2 := 16  # y axis (even parity)
	v3 := 15  # data stride
	i  := title-init
	:macro title-slice {
		sprite v0 v1 15
		i += v3
		sprite v0 v2 15
		i += v3
		v0 += 8
	}
	title-slice title-slice
	title-slice title-slice
	title-slice title-slice
	title-slice title-slice

	# animate the "octo" vertical scroll,
	# again, using a fully-unrolled loop:
	v0 := 3 # x axis
	loop
		i := octo-slices
		:macro do-16 x { x x x x  x x x x  x x x x  x x x x }
		do-16 scroll-slice
		do-16 scroll-slice
		do-16 scroll-slice
	again

: scroll-slice
	sprite v0 v1 15
	i += v3
	sprite v0 v2 15
	i += v3
: sync
	loop
		vf := delay
		if vf != 0 then
	again
	vf := 3
	delay := vf
;

: title-init # 64x30 pixels in 8x15 chunks
	# this image was imported using ez-pack: https://beyondloom.com/tools/ezpack.html
	0x0F 0x1F 0x1C 0x18 0x18 0x18 0x1C 0x1F 0x0F 0x00 0x0F 0x1F 0x1C 0x18 0x18 0x18
	0x1C 0x1F 0x0F 0x00 0x1F 0x1F 0x1F 0x03 0x03 0x03 0x03 0x03 0x03 0x00 0xC0 0xE0
	0xE0 0x60 0x60 0x60 0xE0 0xE0 0xC0 0x00 0xC0 0xE0 0xE0 0x00 0x00 0x00 0xE0 0xE0
	0xC0 0x00 0xE0 0xE0 0xE0 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x3F 0x3F 0x7F
	0x7F 0x00 0x00 0x00 0x00 0x41 0x61 0x73 0x3F 0x3F 0x1E 0x00 0x00 0x00 0x00 0x00
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xFF 0xFE 0xFC 0xFC 0x79
	0xF9 0xF3 0xF3 0xE7 0xEE 0xCC 0xD8 0xB0 0x20 0x00 0x01 0x03 0x07 0x0F 0x03 0x03
	0x03 0x03 0x03 0x03 0x03 0x1F 0x1F 0x00 0x00 0x3C 0x7E 0x7F 0xFF 0xEF 0xCF 0xFF
	0xFF 0x87 0x07 0x03 0x03 0x03 0x00 0x00 0xE0 0xE1 0xE3 0xE3 0xE3 0xE3 0xE3 0xE3
	0xE3 0xE3 0xE3 0xF9 0xF8 0x00 0x00 0xF8 0x7C 0x7F 0x3F 0xBB 0xBD 0xBC 0xDC 0xDE
	0xCE 0xEE 0xEF 0xEF 0xEF 0x00 0xFE 0xFF 0xC7 0xCF 0xCF 0xD7 0xD7 0xD7 0xE7 0xE7
	0xC7 0xFF 0xFE 0x00 0x00 0x30 0x38 0x7C 0xFE 0xFF 0xF7 0xF7 0x73 0x33 0x11 0x01
	0x00 0x00 0x00 0x00 0x00 0x00 0x80 0x80 0x80 0x80 0x80 0x80 0x80 0x80 0x80 0x00
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x80 0xC0 0xC0 0xE0 0xE0 0xE0 0xF0 0xF0
	0xF0 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00

: octo-slices
	# this data was prepared using ez-bake animator: http://beyondloom.com/tools/ezbake.html
	# with the following program:

	# const s=[],img=[
	# 	0x7E,0xFF,0xE7,0xC3,0xC3,0xC3,0xE7,0xFF,0x7E,0x00,0x7E,0xFF,0xE7,0xC0,0xC0,0xC0,
	# 	0xE7,0xFF,0x7E,0x00,0xFF,0xFF,0xFF,0x18,0x18,0x18,0x18,0x18,0x18,0x00,0x7E,0xFF,
	# 	0xE7,0xC3,0xC3,0xC3,0xE7,0xFF,0x7E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	# ]
	# for(let z=0;z<32;z++)s.push(img[(z+f)%img.length])
	# g.sprite(0,0,s)

	# 48 frames, each pre-xored:
	0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00
	0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E
	
	0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27
	0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81
	
	0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18
	0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18
	
	0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81
	0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24
	
	0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E
	0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00
	
	0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF
	0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00
	
	0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00
	0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24
	
	0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00
	0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18
	
	0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7
	0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81
	
	0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00
	0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E
	
	0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00
	0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00
	
	0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00
	0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00
	
	0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00
	0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00
	
	0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00
	0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00
	
	0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18
	0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00
	
	0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E
	0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00
	
	0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81
	0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00
	
	0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18
	0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
	
	0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24
	0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E
	
	0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00
	0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81
	
	0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00
	0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18
	
	0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24
	0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24
	
	0xE7 0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18
	0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00
	
	0x00 0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81
	0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00
	
	0x00 0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24
	
	0x00 0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18
	
	0x00 0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00
	0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81
	
	0x00 0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00
	0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E
	
	0x18 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00
	0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E
	
	0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00
	0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81
	
	0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00
	0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18
	
	0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00
	0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27
	
	0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
	0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00
	
	0x00 0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E
	0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00
	
	0x00 0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81
	0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27
	
	0x24 0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18
	0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18
	
	0x18 0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24
	0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81
	
	0x81 0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00
	0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E
	
	0x7E 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00
	0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF
	
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24
	0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00
	
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18
	0x81 0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00
	
	0x00 0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81
	0x7E 0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7
	
	0x00 0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E
	0x7E 0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00
	
	0x00 0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E
	0x81 0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00
	
	0x00 0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81
	0x18 0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00
	
	0x00 0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18
	0x27 0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00
	
	0x00 0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27
	0x00 0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00

	0x7E 0x81 0x18 0x24 0x00 0x00 0x24 0x18 0x81 0x7E 0x7E 0x81 0x18 0x27 0x00
	0x00 0x27 0x18 0x81 0x7E 0xFF 0x00 0x00 0xE7 0x00 0x00 0x00 0x00 0x00 0x18
